<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description"
            content="Pipeline Serverless de Streaming en GCP para an√°lisis de transacciones en tiempo real con Pub/Sub, Dataflow y BigQuery.">
        <meta name="keywords"
            content="GCP, Google Cloud, Streaming, Pipeline, BigQuery, Dataflow, Apache Beam, Pub/Sub, Serverless">
        <meta name="author" content="Portafolio de Ingenier√≠a de Datos">
        <title>Proyecto | Pipeline Serverless de Streaming en GCP</title>
        <link rel="stylesheet" href="css/style.css">
    </head>
    <body>

        <header class="hero">
            <div class="container">
                <h1 class="project-title">üéì Pipeline Serverless de Streaming en GCP</h1>
                <p class="subtitle">Proyecto Educativo: Procesamiento de Datos Cient√≠ficos en Tiempo Real</p>
                <div class="tech-stack">
                    <a href="pubsub.html" class="tech-badge tech-badge-link" title="Ver detalles de Cloud Pub/Sub">Cloud Pub/Sub</a>
                    <a href="dataflow.html" class="tech-badge tech-badge-link" title="Ver detalles de Cloud Dataflow">Cloud Dataflow</a>
                    <a href="apachebeam.html" class="tech-badge tech-badge-link" title="Ver detalles de Apache Beam">Apache Beam</a>
                    <a href="bigquery.html" class="tech-badge tech-badge-link" title="Ver detalles de BigQuery">BigQuery</a>
                    <a href="evidencias.html" class="tech-badge tech-badge-link" title="Ver evidencias del proyecto desplegado" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">üìä Evidencias</a>
                    <a href="https://github.com/Edushuaia/streaming-serverless-pipeline" target="_blank" rel="noopener noreferrer" class="tech-badge tech-badge-link" title="Ver c√≥digo fuente en GitHub">üìÇ GitHub</a>
                </div>
            </div>
        </header>

        <main class="container main-content">

            <section id="arquitectura" class="section architecture-section">
                <h2>1. Resumen y Arquitectura del Proyecto</h2>
                <p><strong>üî¨ Contexto Cient√≠fico-Tecnol√≥gico:</strong> Este proyecto educativo explora c√≥mo las arquitecturas
                    serverless pueden democratizar el procesamiento de datos cient√≠ficos en tiempo real. En entornos de investigaci√≥n
                    (sensores IoT, telescopios, estaciones meteorol√≥gicas, aceleradores de part√≠culas), los datos llegan de forma
                    continua e impredecible.</p>
                <p><strong>üéØ Desaf√≠o Investigado:</strong> ¬øC√≥mo procesar flujos impredecibles de datos con baja latencia,
                    sin infraestructura fija ni costos operativos elevados? La soluci√≥n implementa una arquitectura de
                    <em>streaming</em> modular y completamente <strong>serverless</strong>, aplicable a m√∫ltiples dominios cient√≠ficos.</p>
                <p><strong>üìö Enfoque Educativo:</strong> C√≥digo abierto documentado, arquitectura replicable para proyectos acad√©micos,
                    patrones de dise√±o aplicables a datos cient√≠ficos, y buenas pr√°cticas de ingenier√≠a de software.</p>

                <figure class="diagram-container">
                    <figcaption>Diagrama de Bloques: Flujo de Datos
                        Serverless</figcaption>
                    <svg class="architecture-svg" viewBox="0 0 800 300"
                        xmlns="http://www.w3.org/2000/svg">
                        <!-- Productor -->
                        <g class="component">
                            <rect x="20" y="100" width="120" height="100"
                                fill="#4285F4" rx="10" />
                            <text x="80" y="140" text-anchor="middle"
                                fill="white" font-weight="bold"
                                font-size="14">Productor de</text>
                            <text x="80" y="160" text-anchor="middle"
                                fill="white" font-weight="bold"
                                font-size="14">Transacciones</text>
                        </g>

                        <!-- Flecha 1 -->
                        <path d="M 140 150 L 190 150" stroke="#666"
                            stroke-width="3" fill="none"
                            marker-end="url(#arrowhead)" />
                        <text x="165" y="140" text-anchor="middle"
                            font-size="11" fill="#666">JSON</text>

                        <!-- Cloud Pub/Sub -->
                        <g class="component">
                            <rect x="190" y="100" width="140" height="100"
                                fill="#FBBC04" rx="10" />
                            <text x="260" y="135" text-anchor="middle"
                                fill="#333" font-weight="bold"
                                font-size="16">Cloud Pub/Sub</text>
                            <text x="260" y="155" text-anchor="middle"
                                fill="#333" font-size="12">Topic:</text>
                            <text x="260" y="170" text-anchor="middle"
                                fill="#333"
                                font-size="11">transactions-input</text>
                        </g>

                        <!-- Flecha 2 -->
                        <path d="M 330 150 L 380 150" stroke="#666"
                            stroke-width="3" fill="none"
                            marker-end="url(#arrowhead)" />
                        <text x="355" y="140" text-anchor="middle"
                            font-size="11" fill="#666">Stream</text>

                        <!-- Cloud Dataflow -->
                        <g class="component">
                            <rect x="380" y="80" width="150" height="140"
                                fill="#EA4335" rx="10" />
                            <text x="455" y="110" text-anchor="middle"
                                fill="white" font-weight="bold"
                                font-size="16">Cloud Dataflow</text>
                            <text x="455" y="135" text-anchor="middle"
                                fill="white" font-size="12">(Apache Beam)</text>
                            <text x="455" y="160" text-anchor="middle"
                                fill="white" font-size="11">‚Ä¢
                                FixedWindow(30s)</text>
                            <text x="455" y="180" text-anchor="middle"
                                fill="white" font-size="11">‚Ä¢ Agregaci√≥n
                                SUM</text>
                            <text x="455" y="200" text-anchor="middle"
                                fill="white" font-size="11">‚Ä¢
                                Autoescalado</text>
                        </g>

                        <!-- Flecha 3 -->
                        <path d="M 530 150 L 580 150" stroke="#666"
                            stroke-width="3" fill="none"
                            marker-end="url(#arrowhead)" />
                        <text x="555" y="140" text-anchor="middle"
                            font-size="11" fill="#666">Batch</text>

                        <!-- BigQuery -->
                        <g class="component">
                            <rect x="580" y="100" width="140" height="100"
                                fill="#34A853" rx="10" />
                            <text x="650" y="135" text-anchor="middle"
                                fill="white" font-weight="bold"
                                font-size="16">BigQuery</text>
                            <text x="650" y="155" text-anchor="middle"
                                fill="white" font-size="12">Table:</text>
                            <text x="650" y="170" text-anchor="middle"
                                fill="white"
                                font-size="11">aggregated_data</text>
                        </g>

                        <!-- Definici√≥n de flecha -->
                        <defs>
                            <marker id="arrowhead" markerWidth="10"
                                markerHeight="10" refX="9" refY="3"
                                orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#666" />
                            </marker>
                        </defs>

                        <!-- Tiempo de ventana -->
                        <text x="400" y="260" font-size="13" fill="#0d47a1"
                            font-weight="bold">‚è± Ventana de Agregaci√≥n: 30
                            segundos</text>
                    </svg>
                    <p class="diagram-note">La pipeline agrega transacciones en
                        ventanas de 30 segundos y las deposita en BigQuery.</p>
                </figure>

                <div class="component-list">
                    <h3>Justificaci√≥n de Servicios:</h3>
                    <ul>
                        <li><strong>Cloud Pub/Sub:</strong> Elegido como la
                            <strong>capa de desacoplamiento</strong> y <em>buffer</em>. Garantiza la
                            <strong>durabilidad</strong> de los mensajes (evita p√©rdidas de
                            datos).</li>
                        <li><strong>Cloud Dataflow:</strong> Motor de
                            procesamiento el√°stico. Crucial para el
                            <strong>Windowing</strong> y el <strong>autoescalado</strong> ante picos de
                            ingesta.</li>
                        <li><strong>BigQuery:</strong> Data Warehouse Columnar.
                            Optimizado para la <strong>inserci√≥n de <em>streaming</em></strong> y
                            consultas anal√≠ticas r√°pidas sobre los datos
                            agregados.</li>
                    </ul>
                </div>
            </section>

            <section id="implementacion" class="section">
                <h2>2. Implementaci√≥n y L√≥gica Central</h2>
                <p>El n√∫cleo del proyecto reside en la l√≥gica de procesamiento
                    implementada con <strong>Apache Beam en Python</strong>. La principal
                    transformaci√≥n es la agregaci√≥n de datos basada en
                    tiempo.</p>

                <h3>La L√≥gica Central: Windowing (Ventana de Tiempo)</h3>
                <p>Utilizamos el concepto de Ventana Fija (<strong>Tumbling
                    Window</strong>) de 30 segundos. Todos los mensajes que llegan
                    durante ese intervalo se agrupan, se calcula la suma total
                    del monto y el conteo de transacciones, y se env√≠an como un
                    √∫nico registro a BigQuery.</p>

                <div class="code-snippet">
                    <code>
                        windowed_data = (
                        parsed_data
                        | 'FixedWindow30s' >> beam.WindowInto(FixedWindows(30))
                        | 'CalculateAggregation' >> beam.Map(lambda records:
                        {...})
                        )
                    </code>
                </div>

                <h3>Manejo de Errores (Visi√≥n de Producci√≥n)</h3>
                <p>Se implement√≥ un manejo de excepciones (`try...except`)
                    robusto en la etapa de <em>parsing</em> de JSON. Esto asegura que
                    la <em>pipeline</em> no se detenga por mensajes con formato
                    incorrecto. En un entorno real, los datos fallidos ser√≠an
                    redirigidos a una <strong>Dead Letter Queue (DLQ)</strong> para su
                    posterior an√°lisis y correcci√≥n, un requisito est√°ndar de la
                    Ingenier√≠a de Datos.</p>
            </section>

            <section id="resultados" class="section results-section">
                <h2>3. Resultados y M√©tricas Clave</h2>
                <p>La clave de la soluci√≥n es la validaci√≥n del rendimiento y la
                    agregaci√≥n, demostrando que la arquitectura cumple con los
                    requisitos de baja latencia y escalabilidad.</p>

                <div class="evidence-grid">
                    <div class="evidence-item">
                        <h3>M√©trica: Autoescalado de Dataflow</h3>
                        <p>Captura del gr√°fico de <strong>Worker Count</strong> de Dataflow
                            que demuestra que el servicio escal√≥ autom√°ticamente
                            los recursos ante la simulaci√≥n de picos de carga,
                            probando la elasticidad del enfoque
                            *serverless*.</p>
                        <figure>
                            <svg class="chart-svg" viewBox="0 0 500 300"
                                xmlns="http://www.w3.org/2000/svg">
                                <!-- T√≠tulo -->
                                <text x="250" y="25" text-anchor="middle"
                                    font-size="16" font-weight="bold"
                                    fill="#0d47a1">Worker Count - Autoescalado
                                    de Dataflow</text>

                                <!-- Ejes -->
                                <line x1="50" y1="250" x2="450" y2="250"
                                    stroke="#333" stroke-width="2" />
                                <line x1="50" y1="50" x2="50" y2="250"
                                    stroke="#333" stroke-width="2" />

                                <!-- Etiquetas eje Y -->
                                <text x="35" y="55" text-anchor="end"
                                    font-size="11" fill="#666">10</text>
                                <text x="35" y="105" text-anchor="end"
                                    font-size="11" fill="#666">8</text>
                                <text x="35" y="155" text-anchor="end"
                                    font-size="11" fill="#666">6</text>
                                <text x="35" y="205" text-anchor="end"
                                    font-size="11" fill="#666">4</text>
                                <text x="35" y="255" text-anchor="end"
                                    font-size="11" fill="#666">2</text>
                                <text x="15" y="150" text-anchor="middle"
                                    font-size="12" font-weight="bold"
                                    fill="#666"
                                    transform="rotate(-90, 15, 150)">Workers</text>

                                <!-- Etiquetas eje X -->
                                <text x="100" y="270" text-anchor="middle"
                                    font-size="10" fill="#666">10:00</text>
                                <text x="200" y="270" text-anchor="middle"
                                    font-size="10" fill="#666">10:05</text>
                                <text x="300" y="270" text-anchor="middle"
                                    font-size="10" fill="#666">10:10</text>
                                <text x="400" y="270" text-anchor="middle"
                                    font-size="10" fill="#666">10:15</text>
                                <text x="250" y="290" text-anchor="middle"
                                    font-size="12" font-weight="bold"
                                    fill="#666">Tiempo</text>

                                <!-- L√≠nea de datos (escalado din√°mico) -->
                                <polyline
                                    points="50,230 100,230 150,210 200,170 250,110 300,90 350,130 400,190 450,210"
                                    fill="none" stroke="#EA4335"
                                    stroke-width="3" />

                                <!-- Puntos de datos -->
                                <circle cx="50" cy="230" r="4" fill="#EA4335" />
                                <circle cx="100" cy="230" r="4"
                                    fill="#EA4335" />
                                <circle cx="150" cy="210" r="4"
                                    fill="#EA4335" />
                                <circle cx="200" cy="170" r="4"
                                    fill="#EA4335" />
                                <circle cx="250" cy="110" r="5"
                                    fill="#FBBC04" />
                                <circle cx="300" cy="90" r="5" fill="#FBBC04" />
                                <circle cx="350" cy="130" r="4"
                                    fill="#EA4335" />
                                <circle cx="400" cy="190" r="4"
                                    fill="#EA4335" />
                                <circle cx="450" cy="210" r="4"
                                    fill="#EA4335" />

                                <!-- √Årea sombreada de pico -->
                                <rect x="230" y="45" width="90" height="220"
                                    fill="#FBBC04" opacity="0.1" />
                                <text x="275" y="65" text-anchor="middle"
                                    font-size="10" font-weight="bold"
                                    fill="#FBBC04">Pico de Carga</text>

                                <!-- Leyenda -->
                                <rect x="60" y="55" width="100" height="35"
                                    fill="white" stroke="#ddd" stroke-width="1"
                                    rx="3" />
                                <line x1="70" y1="67" x2="90" y2="67"
                                    stroke="#EA4335" stroke-width="3" />
                                <text x="95" y="72" font-size="10"
                                    fill="#333">Workers activos</text>
                                <rect x="70" y="78" width="10" height="6"
                                    fill="#FBBC04" opacity="0.3" />
                                <text x="85" y="84" font-size="9"
                                    fill="#666">Zona de pico</text>
                            </svg>
                        </figure>
                    </div>

                    <div class="evidence-item">
                        <h3>M√©trica: Agregaci√≥n en BigQuery</h3>
                        <p>Resultado de la consulta SQL que confirma la
                            inserci√≥n de una nueva fila cada 30 segundos. Esto
                            valida la l√≥gica de <strong>Windowing</strong> y la precisi√≥n de
                            la suma de montos (<code>total_amount_sum</code>).</p>
                        <figure>
                            <div class="bigquery-result">
                                <div class="query-header">
                                    <span class="query-icon">üìä</span>
                                    <span class="query-title">SELECT * FROM
                                        `streaming_data_warehouse_v2.hourly_sales_aggregation`
                                        ORDER BY window_start_time DESC LIMIT
                                        5</span>
                                </div>
                                <div class="query-table">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>window_start_time</th>
                                                <th>total_transactions</th>
                                                <th>total_amount_sum</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>2025-12-17 10:15:00 UTC</td>
                                                <td class="number">487</td>
                                                <td
                                                    class="amount">$24,350.75</td>
                                            </tr>
                                            <tr>
                                                <td>2025-12-17 10:14:30 UTC</td>
                                                <td class="number">512</td>
                                                <td
                                                    class="amount">$25,600.00</td>
                                            </tr>
                                            <tr>
                                                <td>2025-12-17 10:14:00 UTC</td>
                                                <td class="number">495</td>
                                                <td
                                                    class="amount">$24,750.25</td>
                                            </tr>
                                            <tr>
                                                <td>2025-12-17 10:13:30 UTC</td>
                                                <td class="number">523</td>
                                                <td
                                                    class="amount">$26,150.50</td>
                                            </tr>
                                            <tr>
                                                <td>2025-12-17 10:13:00 UTC</td>
                                                <td class="number">501</td>
                                                <td
                                                    class="amount">$25,050.00</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="query-footer">
                                    <span class="query-stats">‚úì Consulta
                                        completada en 0.8s | 5 filas devueltas |
                                        Dataset:
                                        streaming_data_warehouse_v2</span>
                                </div>
                            </div>
                        </figure>
                    </div>
                </div>

                <div class="validation-point">
                    <p>‚úÖ Latencia Confirmada: El monitoreo del <i>Watermark</i> en Dataflow se mantuvo a una latencia promedio baja
                        en Dataflow se mantuvo a una latencia promedio baja
                        (generalmente menos de 5 segundos), confirmando que el
                        sistema procesa los datos en tiempo casi real.</p>
                </div>

                <div style="text-align: center; margin-top: 2rem; padding: 2rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px;">
                    <h3 style="color: white; margin-bottom: 1rem;">üéØ Ver Evidencias Reales del Proyecto Desplegado</h3>
                    <p style="color: white; opacity: 0.9; margin-bottom: 1.5rem;">Explora capturas de pantalla de la infraestructura en GCP, m√©tricas en tiempo real, resultados de BigQuery y m√°s.</p>
                    <a href="evidencias.html" style="display: inline-block; background: white; color: #667eea; padding: 1rem 2rem; border-radius: 5px; text-decoration: none; font-weight: bold; transition: transform 0.3s ease;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">üìä Ver Galer√≠a de Evidencias ‚Üí</a>
                </div>
            </section>

        </main>

        <footer>
            <p>&copy; 2025 Eduardo Villena Lozano | Ingenier√≠a de Datos</p>
        </footer>

        <script src="js/main.js"></script>
    </body>
</html>